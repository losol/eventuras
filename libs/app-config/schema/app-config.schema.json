{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://eventuras.dev/schema/app-config.schema.json",
  "title": "Eventuras App Configuration",
  "description": "Schema for Eventuras application configuration including environment variables",
  "type": "object",
  "required": ["name", "type", "env"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "name": {
      "type": "string",
      "description": "Application package name (e.g., @eventuras/web)",
      "pattern": "^@eventuras/[a-z0-9-]+$"
    },
    "type": {
      "type": "string",
      "enum": ["app"],
      "description": "Configuration type (currently only 'app' is supported)"
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of the application"
    },
    "env": {
      "type": "object",
      "description": "Environment variable definitions",
      "additionalProperties": {
        "$ref": "#/definitions/envVar"
      }
    },
    "build": {
      "type": "object",
      "description": "Build configuration",
      "properties": {
        "outDir": {
          "type": "string",
          "description": "Output directory for build artifacts"
        },
        "target": {
          "type": "string",
          "description": "ECMAScript target version"
        }
      }
    },
    "runtime": {
      "type": "object",
      "description": "Runtime configuration",
      "properties": {
        "port": {
          "type": "number",
          "description": "Default port for the application"
        }
      }
    }
  },
  "definitions": {
    "envVar": {
      "type": "object",
      "required": ["required", "client", "type", "description"],
      "properties": {
        "required": {
          "type": "boolean",
          "description": "Whether this environment variable is required"
        },
        "client": {
          "type": "boolean",
          "description": "Whether this variable is exposed to the client (NEXT_PUBLIC_* in Next.js)"
        },
        "type": {
          "type": "string",
          "enum": ["string", "url", "int", "bool", "json"],
          "description": "Expected type of the environment variable"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of the variable's purpose"
        },
        "default": {
          "description": "Default value if not provided"
        },
        "pattern": {
          "type": "string",
          "description": "Regular expression pattern for validation"
        },
        "enum": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Allowed values"
        }
      }
    }
  }
}
