# Required
tenant: ""  # Short identifier, e.g. "acme" – used in app/namespace names

# Image defaults
app:
  image:
    registry: docker.io
    repository: losol/eventuras-api
  httpRoute:
    sectionName: https   # Must match a listener in the Gateway (e.g. https-eventuras)

# Non-sensitive application config – set per tenant
config:
  allowedOrigins: ""               # e.g. "https://app.acme.example.com"
  auth:
    issuer: ""                     # e.g. "https://acme.eu.auth0.com"
    audience: ""                   # e.g. "https://acme/api"
    apiIdentifier: ""
  features:
    useSentry: false
    usePowerOffice: false
  converto:
    pdfEndpointUrl: ""             # e.g. "http://converto/v1/pdf"
    tokenEndpointUrl: ""           # e.g. "http://converto/token"

# Extra non-sensitive env vars for this tenant (beyond config: above)
# Useful for app-specific settings like SMTP, Sentry, feature flags etc.
# Sensitive values (passwords, tokens) belong in the eventuras-api-secrets k8s Secret.
extraEnv: {}
# e.g.
#   Smtp__Host: smtp.office365.com
#   Smtp__Port: "587"
#   FeatureManagement__UseStripeInvoice: "false"

# Environments – enable/disable and configure per tenant
environments:
  dev:
    enabled: false
    hostname: ""         # e.g. "api-dev.app.example.com"
    namespace: ""         # Override default ({{ .Chart.Name }}-{{ tenant }}-dev)
    tag: edge
    pullPolicy: Always
    aspnetEnvironment: Development
    autoSync: true

  staging:
    enabled: true
    hostname: ""         # e.g. "api-staging.acme.example.com"
    namespace: ""         # Override default ({{ .Chart.Name }}-{{ tenant }}-staging)
    tag: canary
    pullPolicy: Always
    aspnetEnvironment: Staging
    autoSync: true

  prod:
    enabled: true
    hostname: ""         # e.g. "api.acme.example.com"
    namespace: ""         # Override default ({{ .Chart.Name }}-{{ tenant }}-prod)
    tag: "0.0.0"         # Set by CI on release
    pullPolicy: IfNotPresent
    aspnetEnvironment: Production
    autoSync: false
