# Required
tenant: ""  # Short identifier, e.g. "internal" – used in app/namespace names

# Image defaults
app:
  image:
    registry: docker.io
    repository: losolio/eventuras-web
  httpRoute:
    gateway:
      name: traefik-gateway    # Name of the Gateway resource
      namespace: traefik       # Namespace where the Gateway lives
      sectionName: https       # Must match a listener in the Gateway (e.g. https-eventuras)

# Non-sensitive env vars shared across all environments for this tenant.
# Names are 1-1 with what the app reads (see apps/web/app.config.json).
config:
  DEFAULT_LOCALE: "nb-NO"         # "nb-NO" or "en-US"
  ORGANIZATION_ID: ""             # e.g. "1"
  AUTH0_DOMAIN: ""               # e.g. "eventuras.eu.auth0.com"
  SITE_SETTINGS_URL: ""           # optional
  SENTRY_DSN: ""                  # optional – safe to commit (public DSN)

# Server-side secrets – NOT set here, belong in eventuras-web-secrets k8s Secret:
#   AUTH0_CLIENT_ID, AUTH0_CLIENT_SECRET, AUTH0_API_AUDIENCE, SESSION_SECRET

# Extra non-sensitive env vars not covered by config: above
extraEnv: {}

# Environments – enable/disable and configure per tenant
environments:
  dev:
    enabled: false
    hostname: ""         # e.g. "web-dev.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-dev)
    tag: edge
    pullPolicy: Always
    nodeEnv: development
    autoSync: true
    extraEnv:            # Per-environment URL overrides
      BACKEND_URL: ""        # e.g. "https://api-dev.internal.example.com"
      APPLICATION_URL: ""    # e.g. "https://web-dev.internal.example.com"
      LOGOUT_URL_REDIRECT: "" # usually same as APPLICATION_URL

  staging:
    enabled: true
    hostname: ""         # e.g. "web-staging.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-staging)
    tag: canary
    pullPolicy: Always
    nodeEnv: production
    autoSync: true
    extraEnv:            # Per-environment URL overrides
      BACKEND_URL: ""        # e.g. "https://api-staging.internal.example.com"
      APPLICATION_URL: ""    # e.g. "https://web-staging.internal.example.com"
      LOGOUT_URL_REDIRECT: "" # usually same as APPLICATION_URL

  prod:
    enabled: true
    hostname: ""         # e.g. "web-prod.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-prod)
    tag: "0.0.0"         # Set by CI on release
    pullPolicy: IfNotPresent
    nodeEnv: production
    autoSync: false
    extraEnv:            # Per-environment URL overrides
      BACKEND_URL: ""        # e.g. "https://api-prod.internal.example.com"
      APPLICATION_URL: ""    # e.g. "https://web-prod.internal.example.com"
      LOGOUT_URL_REDIRECT: "" # usually same as APPLICATION_URL
