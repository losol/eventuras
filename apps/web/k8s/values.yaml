# Required
tenant: ""  # Short identifier, e.g. "internal" – used in app/namespace names

# Image defaults
app:
  image:
    registry: docker.io
    repository: losol/eventuras-web
  httpRoute:
    gateway:
      name: traefik-gateway    # Name of the Gateway resource
      namespace: traefik       # Namespace where the Gateway lives
      sectionName: https       # Must match a listener in the Gateway (e.g. https-eventuras)

# Non-sensitive env vars – names are 1-1 with what the app reads.
# See apps/web/app.config.json for the full list and descriptions.
config:
  NEXT_PUBLIC_BACKEND_URL: ""          # e.g. "https://api.internal.example.com"
  NEXT_PUBLIC_APPLICATION_URL: ""      # e.g. "https://app.internal.example.com"
  NEXT_PUBLIC_LOGOUT_URL_REDIRECT: "" # e.g. "https://app.internal.example.com"
  NEXT_PUBLIC_DEFAULT_LOCALE: "nb-NO" # "nb-NO" or "en-US"
  NEXT_PUBLIC_ORGANIZATION_ID: ""      # e.g. "1"
  NEXT_PUBLIC_AUTH0_DOMAIN: ""         # e.g. "eventuras.eu.auth0.com"
  NEXT_PUBLIC_SITE_SETTINGS_URL: ""    # optional
  NEXT_PUBLIC_SENTRY_DSN: ""           # optional – safe to commit (public DSN)
  NEXT_PUBLIC_POSTHOG_KEY: ""          # optional – safe to commit (public key)

# Server-side secrets – NOT set here, belong in eventuras-web-secrets k8s Secret:
#   AUTH0_CLIENT_ID, AUTH0_CLIENT_SECRET, AUTH0_API_AUDIENCE, SESSION_SECRET

# Extra non-sensitive env vars not covered by config: above
extraEnv: {}

# Environments – enable/disable and configure per tenant
environments:
  dev:
    enabled: false
    hostname: ""         # e.g. "app-dev.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-dev)
    tag: edge
    pullPolicy: Always
    nodeEnv: development
    autoSync: true

  staging:
    enabled: true
    hostname: ""         # e.g. "app-staging.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-staging)
    tag: canary
    pullPolicy: Always
    nodeEnv: production
    autoSync: true

  prod:
    enabled: true
    hostname: ""         # e.g. "app.internal.example.com"
    namespace: ""        # Override default (eventuras-web-{{ tenant }}-prod)
    tag: "0.0.0"         # Set by CI on release
    pullPolicy: IfNotPresent
    nodeEnv: production
    autoSync: false
