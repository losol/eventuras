@using losol.EventManagement.Web.ViewModels
@using System.Globalization;
@model CertificateVM
@{
    Layout = null;
}
<html>
  <head>
    <meta charset="utf8">
    <title>Certificate</title>
    <link 
      href="https://fonts.googleapis.com/css?family=Material+Icons|Reenie+Beanie|Carrois+Gothic+SC|Libre+Baskerville" 
      rel="stylesheet" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        font-family: 'Carrois Gothic SC';
        font-weight: 500;
        font-size: 12px;
        background: rgb(241,241,241);
        -webkit-print-color-adjust: exact;
        box-sizing: border-box;
      }
      .page {
        position: relative;
        height: 297mm;
        width: 210mm;
        text-align: center;
        display: block;
        background: #fff;
        color: black;
        page-break-after: auto;
        margin: 50px;
        overflow: hidden;
      }
      @@media print {
        body {
          background: #fff;
        }
        .page {
          margin: 0;
          height: 100%;
          width: 100%;
        }
      }
      .page.first {
        border-left: 5px solid green;
      }
      .bottom {
        position: absolute;
        left: 5mm;
        right: 5mm;
        bottom: 5mm;
      }
      .group {
        padding: 3mm 25mm;
        margin: 5mm;
      }
      .line {
        position: relative;
      }
      .center {
        text-align: center;
      }
      .logo {
        padding: 3mm;
      }
      .w-50 {
        width: 50%;
      }
      .w-25 {
        width: 25%;
      }
      .handwriting {
        font-size: 24px;
        font-family: 'Reenie Beanie';
        padding-bottom:0;
        text-decoration: underline;
      }

      .featured {
        padding: 25mm 0 10mm 0;
        background-color: #336699;
        color: white;
      }

      .title {
        font-size: 32px
      }

      .subtitle {
        font-size: 28px
      }

      .text {
        font-family: 'Libre Baskerville', serif;
        font-size: 14px
      }

      .light {
        color: #555
      }

    </style>
  </head>
  <body>
    <div class="page">
        <div class="featured">
          <div class="line title">Kursbevis</div>
          <div class="line subtitle">@Model.Title</div>          
        </div>

        <div class="group">
          <div class="line">Tildelt</div>
          <div class="subtitle">@Model.RecipientName</div>
        </div>

        <div class="group">
          @if (Model.EvidenceDescription != null) {
            <div class="line">@Model.EvidenceDescription</div>
            <br />
          }
          <div class="line">Basert p&aring;</div>
            @if (Model.Evidence != null && Model.Evidence.Any()) {
                @foreach (var item in Model.Evidence) {
                  <div class="line">
                    @item.Registration.EventInfo.Title 
                    @if(item.Registration.EventInfo.City != null) {
                      <span> - @item.Registration.EventInfo.City</span>
                    }
                    @if(item.Registration.EventInfo.DateStart != null) {
                      <span> - @String.Format("{0:d/M/yyyy}", item.Registration.EventInfo.DateStart)</span>
                    }
                    
                    @if(item.Registration.EventInfo.DateEnd != null) {
                      <span> - @String.Format("{0:d/M/yyyy}", item.Registration.EventInfo.DateEnd)</span>
                    }
                  </div>
                }
            }
        </div>

        @if (Model.IssuerOrganizationName != null) {
        <div class="group">
          <div class="logo">
            @if(!string.IsNullOrEmpty(Model.IssuerOrganizationLogoBase64)) {
                <img src="@Model.IssuerOrganizationLogoBase64" alt="signatur" class="center w-50" />
              } 
          </div>
          <div class="line">
            Arrangert av @Model.IssuerOrganizationName  
          </div>
        </div>
        }

          @if(Model.Description != null) {
              <div class="group">
                <pre class="line text">@Model.Description</pre>
              </div>
            }

        <div class="group">
          <div class="line">@Model.IssuedInCity @Model.IssuingDate</div>

          @if(!string.IsNullOrEmpty(Model.IssuerPersonSignatureImageBase64)) {
            <img src="@Model.IssuerPersonSignatureImageBase64" class="w-25" alt="signatur" />
          } else {
          <div class="line handwriting">@Model.IssuerPersonName</div>
          }
          <div class="line">@Model.IssuerPersonName</div>
          <div class="line">
            Kursansvarlig<br />
            <br />
            <br />
            <small>Digitalt signert med kode <br />
            <code>@Model.CertificateGuid</code></small>
          </div>
        </div>
    </div>
  </body>
</html>
